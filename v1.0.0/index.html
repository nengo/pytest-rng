<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>pytest-rng &#8212; pytest-rng 1.0.0 docs</title>
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,400i,600|Rajdhani:700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
<link rel="stylesheet" href="https://www.nengo.ai/css/bootstrap.css" type="text/css">
<style>
  body .title-bar,
  body .documentation-source h1:after {
    background-color: #a8acaf;
  }
</style>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://unpkg.com/scrollreveal"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stickyfill/2.1.0/stickyfill.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GT8XEDLTMJ"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 gtag('config', 'G-GT8XEDLTMJ');
</script>
<!-- End Google tag (gtag.js) -->

<!-- Matomo -->
<script>
 var _paq = window._paq = window._paq || [];
 _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
 _paq.push(["setCookieDomain", "*.appliedbrainresearch.com"]);
 _paq.push(["setDomains", ["*.appliedbrainresearch.com","*.edge.nengo.ai","*.forum.nengo.ai","*.labs.nengo.ai","*.nengo.ai"]]);
 _paq.push(["enableCrossDomainLinking"]);
 _paq.push(["setDoNotTrack", true]);
 _paq.push(['trackPageView']);
 _paq.push(['enableLinkTracking']);
 (function() {
   var u="https://appliedbrainresearch.matomo.cloud/";
   _paq.push(['setTrackerUrl', u+'matomo.php']);
   _paq.push(['setSiteId', '3']);
   var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
   g.async=true; g.src='//cdn.matomo.cloud/appliedbrainresearch.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
 })();
</script>
<!-- End Matomo Code -->
<!-- From basic/layout.html -->
<script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>


<script type="text/javascript" src="_static/underscore.js"></script>


<script type="text/javascript" src="_static/doctools.js"></script>


<script type="text/javascript" src="_static/language_data.js"></script>

    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  </head><body class="bg-dark">

<header class="fixed-top header-top shadow-sm">
  <nav class="navbar navbar-expand-md navbar-light bg-white">
    <a class="navbar-brand" href="https://www.nengo.ai">
      <img
        src="https://www.nengo.ai/design/_images/general-full-light.svg"
        alt="Nengo"
        class="logo"
      />
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbar-collapse"
      aria-controls="navbar-collapse"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar-collapse">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="https://www.nengo.ai">What is Nengo?</a>
        </li>
        <li class="nav-item dropdown active">
          <a
            class="nav-link dropdown-toggle"
            id="navbar-dropdown-docs"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
            href="#"
            >Documentation</a
          >
          <div
            class="dropdown-menu shadow-lg border-0"
            aria-labelledby="navbar-dropdown-docs"
          >

            <a class="dropdown-item" href="https://www.nengo.ai/nengo/">Nengo Core</a>
            <a class="dropdown-item" href="https://github.com/nengo/nengo-gui/">Nengo GUI</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-dl/">Nengo DL</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-spa/">Nengo SPA</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-extras/">Nengo Extras</a>
            <a class="dropdown-item" href="https://arvoelke.github.io/nengolib-docs/">Nengolib</a>
            <a class="dropdown-item" href="https://github.com/nengo/nengo-examples/">Nengo Examples</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-fpga/">Nengo FPGA</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-loihi/">Nengo Loihi</a>
            <a class="dropdown-item" href="https://github.com/nengo/nengo-ocl">Nengo OpenCL</a>
            <a class="dropdown-item" href="https://github.com/project-rig/nengo_spinnaker">Nengo SpiNNaker</a>
            <a class="dropdown-item" href="https://github.com/nengo/nengo-mpi">Nengo MPI</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/documentation"
              >All documentation</a
            >
          </div>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            id="navbar-dropdown-community"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
            href="#"
            >Community</a
          >
          <div
            class="dropdown-menu shadow-lg border-0"
            aria-labelledby="navbar-dropdown-community"
          >
            <a class="dropdown-item" href="https://forum.nengo.ai">Forum</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/people"
              >People</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/summer-school"
              >Summer school</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/contributing"
              >Contributing</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/publications"
              >Publications</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/videos"
              >Videos</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/conduct"
              >Code of conduct</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/caa">CAA</a>
          </div>
        </li>
        <li class="nav-item">
          <a
            class="nav-link btn btn-success btn-sm text-white"
            href="https://www.nengo.ai/download"
            >Download</a
          >
        </li>
      </ul>
    </div>
  </nav>
</header>
<div class="main-content gradient-top">
  <div class="container-fluid">
    <div class="row"><a class="toggle-sidenav d-block d-md-none" href="#"
  ><i class="icon-close fa fa-fw fa-arrow-left"></i
  ><i class="icon-open fa fa-fw fa-arrow-right"></i
></a>
<div role="complementary" class="sidenav col-4 col-xl-3 p-0 border-right">
  <h3 class="pt-5 px-5">
    <a href="#">
      <img
        class="img-fluid documentation-image"
        src="https://www.nengo.ai/design/_images/general-small-light.svg"
        alt="pytest-rng"
      />
    </a>
  </h3>

  <form class="px-5 pb-5 mb-0 mt-3 border-bottom">
    <div class="form-group">
      <label class="text-gray">Version:</label>
      <select class="custom-select" onchange="switchVersion(this);">


        <option value="../index.html">latest</option>



        <option selected>v1.0.0</option>


      </select>
    </div>
  </form>

  <div class="p-5 toctree">
    <ul>
<li><a class="reference internal" href="#">pytest-rng</a><ul>
<li><a class="reference internal" href="#seed-generation">Seed generation</a></li>
<li><a class="reference internal" href="#salt">salt</a></li>
<li><a class="reference internal" href="#api-reference">API reference</a></li>
</ul>
</li>
</ul>

  </div>
<form class="p-5 my-0 border-top" action="search.html" method="get">
  <div class="form-group form-group-single">
    <input type="text" name="q" class="form-control" placeholder="Search" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
    <button type="submit" class="btn btn-link">
      <img src="https://www.nengo.ai/img/icon-search.svg" alt="Go" />
    </button>
  </div>
</form></div>


      <div class="col-12 col-md-8 col-xl-9">
        <div class="container">
          <div class="row">
            <div class="col-10 offset-1 pb-5 documentation-source" role="main">

  <div class="section" id="pytest-rng">
<h1>pytest-rng<a class="headerlink" href="#pytest-rng" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">pytest-rng</span></code> provides fixtures for
ensuring “randomness” in your tests is reproducible
from one run to the next.
It also allows the seed for all tests to be changed if requested,
to help ensure that test successes are not dependent on
particular random number seeds.</p>
<ul class="simple">
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">rng</span></code> fixture to get a pre-seeded random number generator (RNG)
that exposes NumPy’s <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/random/legacy.html#numpy.random.mtrand.RandomState" title="(in NumPy v1.17)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RandomState</span></code></a> interface.</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">seed</span></code> fixture to get an integer seed
that can be used to initialize your own RNG.</p></li>
</ul>
<p>The following example prints the same four random numbers
every time the test is run.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">test_rectification</span><span class="p">(</span><span class="n">rng</span><span class="p">,</span> <span class="n">seed</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
</pre></div>
</div>
<p>To use these fixtures, install with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install pytest-rng
</pre></div>
</div>
<p>Once installed, you can use these fixtures like any other fixture:
add <code class="docutils literal notranslate"><span class="pre">rng</span></code> or <code class="docutils literal notranslate"><span class="pre">seed</span></code> to the arguments of a test function or class.</p>
<div class="section" id="seed-generation">
<h2>Seed generation<a class="headerlink" href="#seed-generation" title="Permalink to this headline">¶</a></h2>
<p>For the <code class="docutils literal notranslate"><span class="pre">seed</span></code> fixture, we generate a seed by doing the following:</p>
<ol class="arabic simple">
<li><p>Concatenate the test’s <code class="docutils literal notranslate"><span class="pre">nodeid</span></code> and a <code class="docutils literal notranslate"><span class="pre">salt</span></code> value, if provided.</p></li>
<li><p>Hash that string to yield an integer seed.</p></li>
</ol>
<p>For the <code class="docutils literal notranslate"><span class="pre">rng</span></code> fixture, we also add the string <code class="docutils literal notranslate"><span class="pre">&quot;rng&quot;</span></code> to the <code class="docutils literal notranslate"><span class="pre">salt</span></code>
value before generating the seed as above.
The seed is used to instantiate a <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/random/legacy.html#numpy.random.mtrand.RandomState" title="(in NumPy v1.17)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RandomState</span></code></a>,
which is returned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We add <code class="docutils literal notranslate"><span class="pre">&quot;rng&quot;</span></code> to the salt to ensure that random numbers
are different when using the <code class="docutils literal notranslate"><span class="pre">rng</span></code> fixture
and when manually instantiating a <code class="docutils literal notranslate"><span class="pre">RandomState</span></code>
with the <code class="docutils literal notranslate"><span class="pre">seed</span></code> fixture.</p>
</div>
</div>
<div class="section" id="salt">
<h2>salt<a class="headerlink" href="#salt" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">salt</span></code> is a string that is added to the test’s <code class="docutils literal notranslate"><span class="pre">nodeid</span></code>
in order to change the seed for all tests.
It is advantageous to change seeds regularly to ensure that
your test suite is robust to different seeds.</p>
<p>The salt value can be specified in a configuration file
like <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> or <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[tool:pytest]</span>

<span class="na">rng_salt</span> <span class="o">=</span> <span class="s">v0.3.0</span>
</pre></div>
</div>
<p>The salt value can also be specified through the command line.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --rng-salt <span class="s2">&quot;v0.4.0&quot;</span>
</pre></div>
</div>
<p>The salt value passed through the command line takes precedence
over the value set in the configuration file
so that you can change seeds on-the-fly.</p>
</div>
<div class="section" id="api-reference">
<h2>API reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pytest_rng.plugin.rng">
<code class="sig-prename descclassname">pytest_rng.plugin.</code><code class="sig-name descname">rng</code><span class="sig-paren">(</span><em class="sig-param">request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_rng/plugin.html#rng"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_rng.plugin.rng" title="Permalink to this definition">¶</a></dt>
<dd><p>A seeded random number generator (RNG).</p>
<p>An instance of <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/random/legacy.html#numpy.random.mtrand.RandomState" title="(in NumPy v1.17)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RandomState</span></code></a>. It is preferable
to the unseeded <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/random/index.html#module-numpy.random" title="(in NumPy v1.17)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.random</span></code></a> because it is consistent from one
test run to the next when using the same salt value, and preferable to
a fixed seed RNG because changing the salt checks that tests
are not dependent on a specific seed.</p>
</dd></dl>

<dl class="function">
<dt id="pytest_rng.plugin.seed">
<code class="sig-prename descclassname">pytest_rng.plugin.</code><code class="sig-name descname">seed</code><span class="sig-paren">(</span><em class="sig-param">request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_rng/plugin.html#seed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_rng.plugin.seed" title="Permalink to this definition">¶</a></dt>
<dd><p>An integer random number generator seed in the range [0, 2**32 - 1].</p>
<p>The seed is consistent from one test run to the next
when using the same salt value.
It is preferable to a completely fixed seed because changing the salt
checks that tests are not dependent on a specific seed.</p>
</dd></dl>

</div>
</div>


            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div><footer class="text-light footer-main gradient-bottom">
  <p class="small text-center mb-0">
    <a href="https://www.nengo.ai/">What is Nengo?</a>
    <a href="https://www.nengo.ai/documentation/">Documentation</a>
    <a href="https://www.nengo.ai/download/">Download</a>
    <a href="https://appliedbrainresearch.com">ABR</a>
    <a href="https://www.nengo.ai/privacy/">Privacy</a>
  </p>
  <p class="small text-center mb-0">&copy; Applied Brain Research</p>
</footer>
<script>
  function switchVersion(select) {
    var option = select.selectedOptions[0];
    if (option.hasAttribute("value")) {
      window.location = option.value;
    }
  }
</script>

<script>
  var elements = document.querySelectorAll('.sidenav');
  Stickyfill.add(elements);
</script>
<script>
  ScrollReveal().reveal(".fade-in", {
      scale: 0.85,
      duration: 1000,
      delay: 250,
      interval: 50
  });
</script>
<script>
  $('a.toggle-sidenav').on('click', function(e) {
    e.preventDefault();
    if ( $(this).hasClass('active') ) {
      $(this).removeClass('active');
      $('.sidenav').removeClass('open');
    } else {
      $(this).addClass('active');
      $('.sidenav').addClass('open');
    }
  });
</script>
<script>
  var lists = document.querySelectorAll('.toctree ul');
  lists.forEach((ul) => {
      ul.classList.add("nav");
  });
  var links = document.querySelectorAll('.toctree a');
  links.forEach((link) => {
      link.classList.add("nav-link");
  });
  $("body").scrollspy({target: ".sidenav"});
</script>
  </body>
</html>
